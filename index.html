<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Камеры ЖК</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --accent-color: #0071e3;
            --gray-light: #f5f5f7;
            --gray-border: #d2d2d7;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg-color); color: var(--text-color); overflow-x: hidden; }
        
        .container { max-width: 500px; margin: 0 auto; padding: 40px 20px; text-align: center; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; }
        
        h1 { font-size: 32px; font-weight: 600; letter-spacing: -0.5px; margin-bottom: 30px; }
        p { color: #86868b; margin-bottom: 20px; }

        input {
            width: 100%; padding: 15px; margin-bottom: 15px; border-radius: 12px;
            border: 1px solid var(--gray-border); background: var(--gray-light); font-size: 16px; outline: none;
        }

        .btn {
            background: var(--text-color); color: white; border: none; padding: 16px 32px;
            border-radius: 25px; font-size: 16px; font-weight: 500; cursor: pointer; transition: all 0.3s ease;
        }
        .btn:hover { opacity: 0.8; }

        /* Сетки тарифов */
        .plans { display: grid; gap: 15px; margin-top: 20px; }
        .plan-card {
            border: 1px solid var(--gray-border); padding: 25px; border-radius: 18px;
            cursor: pointer; transition: transform 0.2s;
        }
        .plan-card:hover { border-color: var(--text-color); transform: scale(1.02); }
        .plan-card h3 { font-size: 20px; margin-bottom: 5px; }
        .plan-card .price { font-size: 24px; font-weight: 600; }

        /* Спиннер загрузки */
        .loader-container { display: none; text-align: center; }
        .spinner {
            width: 40px; height: 40px; border: 3px solid rgba(0,0,0,0.1);
            border-top: 3px solid var(--text-color); border-radius: 50%;
            animation: spin 1s linear infinite; margin: 20px auto;
        }
              @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Оплата */
        .payment-details { background: #000; color: #fff; padding: 30px; border-radius: 20px; text-align: left; }
        .payment-details p { color: #ccc; margin-bottom: 5px; }
        .payment-details b { font-size: 18px; color: #fff; display: block; margin-bottom: 15px; }
        /* Убираем синий цвет у номеров */
        a[href^="tel"] { color: inherit; text-decoration: none; }

        .timer { font-size: 24px; font-weight: 600; margin: 20px 0; color: #ff3b30; }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container" id="app">
    <!-- Страница 1: Адрес -->
    <div id="step1">
        <h1>Получите доступ к камерам дома уже сегодня!!</h1>
        <input type="text" placeholder="Город" id="city">
        <input type="text" placeholder="Улица" id="street">
        <input type="text" placeholder="Дом" id="house">
        <input type="text" placeholder="Подъезд" id="ent">
        <button class="btn" onclick="goToStep2()">Продолжить</button>
    </div>

    <!-- Страница 2: Тарифы -->
    <div id="step2" class="hidden">
        <h1>Выберите подписку</h1>
        <div class="plans">
            <div class="plan-card" onclick="goToStep3('400₽')">
                <h3>1 Месяц</h3>
                <div class="price">400₽</div>
            </div>
            <div class="plan-card" onclick="goToStep3('1000₽')">
                <h3>3 Месяца</h3>
                <div class="price">1000₽</div>
            </div>
            <div class="plan-card" onclick="goToStep3('2000₽')">
                <h3>6 Месяцев</h3>
                <div class="price">2000₽</div>
            </div>
            <div class="plan-card" onclick="goToStep3('3500₽')">
                <h3>1 Год</h3>
                <div class="price">3500₽</div>
            </div>
        </div>
    </div>

    <!-- Страница 3: Почта -->
    <div id="step3" class="hidden">
        <h1>Доступ к камерам</h1>
        <p>Укажите почту для получения логина, пароля и инструкции</p>
        <input type="email" placeholder="example@mail.com" id="userEmail">
        <button class="btn" onclick="goToStep4()">Перейти к оплате</button>
    </div>

    <!-- Страница 4: Оплата -->
    <div id="step4" class="hidden">
        <h1>Оплата СБП</h1>
        <div class="payment-details">
            <p>Сумма к оплате:</p>
            <b id="finalPrice">0₽</b>
            <p>Номер телефона (СБП):</p>
            <b>+7 (929) 942 81 07</b>
            <p>Банк:</p>
            <b>КБ Солидарность</b>
        </div>
        <div class="timer" id="timer">05:00</div>
        <button class="btn" onclick="verifyPayment()">Проверить оплату</button>
    </div>

    <!-- Ожидание модератора -->
    <div id="stepFinal" class="hidden">
        <h1>Ожидайте проверку</h1>
        <p>Система обрабатывает ваш запрос. Модератор отправит данные для подключения на вашу почту в течение 24 часов.</p>
    </div>

    <!-- Контейнер загрузки -->
    <div id="loader" class="loader-container">
        <div class="spinner"></div>
        <p id="loaderText">Загрузка...</p>
    </div>
</div>

<script>
    let selectedPrice = "";

    function showLoader(time, callback, text = "Загрузка...") {
        document.querySelectorAll('#app > div:not(#loader)').forEach(el => el.classList.add('hidden'));
        const loader = document.getElementById('loader');
        const loaderText = document.getElementById('loaderText');
        loaderText.innerText = text;
        loader.style.display = 'block';

        setTimeout(() => {
            loader.style.display = 'none';callback();
        }, time);
    }

    function goToStep2() {
        showLoader(4000, () => {
            document.getElementById('step2').classList.remove('hidden');
        });
    }

    function goToStep3(price) {
        selectedPrice = price;
        showLoader(2000, () => {
            document.getElementById('step3').classList.remove('hidden');
        });
    }

    function goToStep4() {
        if(!document.getElementById('userEmail').value.includes('@')) {
            alert('Пожалуйста, введите корректный email');
            return;
        }
        showLoader(4000, () => {
            document.getElementById('step4').classList.remove('hidden');
            document.getElementById('finalPrice').innerText = selectedPrice;
            startTimer(300);
        });
    }

    function verifyPayment() {
        showLoader(20000, () => {
            document.getElementById('stepFinal').classList.remove('hidden');
        }, "Система ищет оплату...");
    }

    function startTimer(duration) {
        let timer = duration, minutes, seconds;
        const display = document.querySelector('#timer');
        const interval = setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.textContent = minutes + ":" + seconds;

            if (--timer < 0) {
                clearInterval(interval);
                display.textContent = "Время истекло";
            }
        }, 1000);
    }
</script>

</body>
</html>
